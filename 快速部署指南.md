# 🚀 快速部署指南 - 让网站上线

本指南将帮助你在 10 分钟内将应用部署到网上，让任何人都可以通过网址访问。

## 📋 部署前准备

### 1. 确保 Supabase 已配置完成 ✅

你已经完成了：
- ✅ 在 Supabase 创建了项目
- ✅ 执行了数据库脚本（schema.sql）
- ✅ 导入了食谱数据（seed-recipes.sql）
- ✅ 添加了 notes 列到 shopping_list_items 表

### 2. 获取 Supabase 配置信息

1. 打开 [Supabase Dashboard](https://app.supabase.com/)
2. 进入你的项目
3. 点击左侧 **Settings** → **API**
4. 复制以下信息：
   - **Project URL**（例如：`https://xxxxx.supabase.co`）
   - **anon public key**（以 `eyJ` 开头的长字符串）

---

## 🌐 方法一：使用 Vercel 部署（推荐，最简单）

Vercel 是 Next.js 官方推荐的部署平台，免费且简单。

### 步骤 1：将代码上传到 GitHub

1. **如果没有 GitHub 账号，先注册**：访问 [github.com](https://github.com)

2. **创建新仓库**：
   - 点击右上角 `+` → `New repository`
   - 仓库名：`malaysia-meal-planner`（或任意名称）
   - 选择 `Public`（免费用户只能创建公开仓库）
   - 点击 `Create repository`

3. **上传代码到 GitHub**：

   **方法一：使用自动化脚本（推荐）** ⭐
   
   直接双击 `上传到GitHub.command` 文件即可！
   
   脚本会自动引导你完成所有步骤！

   **方法二：手动执行命令**
   
   在项目文件夹中打开终端，执行：

   ```bash
   cd "/Users/huhaotian/未命名文件夹/malaysia-meal-planner"
   
   # 初始化 git（如果还没有）
   git init
   
   # 添加所有文件
   git add .
   
   # 提交
   git commit -m "Initial commit"
   
   # 连接到 GitHub（替换 YOUR_USERNAME 和 YOUR_REPO_NAME）
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   
   # 推送到 GitHub
   git branch -M main
   git push -u origin main
   ```

   > 💡 **提示**：如果提示需要登录，GitHub 会引导你完成认证。

### 步骤 2：在 Vercel 部署

1. **访问 Vercel**：
   - 打开 [vercel.com](https://vercel.com)
   - 点击 **Sign Up**，使用 GitHub 账号登录（推荐）

2. **导入项目**：
   - 登录后点击 **Add New...** → **Project**
   - 选择你刚才创建的 GitHub 仓库
   - 点击 **Import**

3. **配置项目**：
   - **Framework Preset**: Next.js（自动检测）
   - **Root Directory**: `./`（默认）
   - **Build Command**: `npm run build`（默认）
   - **Output Directory**: `.next`（默认）
   - 其他保持默认即可

4. **添加环境变量**（重要！）：
   
   在 **Environment Variables** 部分，添加以下变量：
   
   ```
   NEXT_PUBLIC_SUPABASE_URL = https://你的项目.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY = 你的anon密钥
   ```
   
   > ⚠️ **注意**：确保在 **Production**、**Preview** 和 **Development** 三个环境都添加了这些变量

5. **部署**：
   - 点击 **Deploy** 按钮
   - 等待 2-3 分钟构建完成
   - 部署成功后，你会得到一个网址，例如：`https://malaysia-meal-planner.vercel.app`

6. **完成！** 🎉
   - 现在任何人都可以通过这个网址访问你的应用了！

---

## 🔧 方法二：使用 Netlify 部署（备选方案）

如果不想用 Vercel，也可以使用 Netlify：

1. 访问 [netlify.com](https://www.netlify.com)，用 GitHub 登录
2. 点击 **Add new site** → **Import an existing project**
3. 选择你的 GitHub 仓库
4. 构建设置：
   - **Build command**: `npm run build`
   - **Publish directory**: `.next`
5. 在 **Site settings** → **Environment variables** 中添加环境变量
6. 点击 **Deploy site**

---

## 🔒 部署后检查清单

部署完成后，请测试以下功能：

- [ ] 访问首页，查看是否能正常加载
- [ ] 填写个人信息表单，测试是否能创建用户
- [ ] 生成膳食计划，检查是否正常工作
- [ ] 查看购物清单功能
- [ ] 检查所有页面是否正常显示

---

## 🌍 自定义域名（可选）

如果你有自己的域名（例如：`mymeal.com`）：

### Vercel 自定义域名：
1. 进入 Vercel 项目设置 → **Domains**
2. 输入你的域名
3. 按照提示配置 DNS 记录
4. 等待 SSL 证书自动配置（通常几分钟）

### DNS 配置示例：
```
类型: CNAME
名称: @ 或 www
值: cname.vercel-dns.com
```

---

## ❓ 常见问题

### Q1: 部署后显示 500 错误？
**A**: 检查环境变量是否正确设置，特别是 `NEXT_PUBLIC_SUPABASE_URL` 和 `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### Q2: 数据库连接失败？
**A**: 
- 确认 Supabase 项目状态是活跃的
- 检查 API 密钥是否正确
- 确认 Supabase 的 RLS（行级安全）策略已正确配置

### Q3: 如何更新网站？
**A**: 只需将代码推送到 GitHub，Vercel 会自动重新部署：
```bash
git add .
git commit -m "更新内容"
git push
```

### Q4: 如何查看错误日志？
**A**: 
- Vercel: 进入项目 → **Deployments** → 点击最新的部署 → 查看日志
- 浏览器控制台：按 F12 打开开发者工具

---

## 📞 需要帮助？

如果遇到问题：
1. 检查 Vercel 部署日志中的错误信息
2. 查看浏览器控制台的错误提示
3. 确认所有环境变量都已正确设置

---

**祝你部署顺利！** 🎉

部署完成后，记得分享你的网站链接给朋友测试！

